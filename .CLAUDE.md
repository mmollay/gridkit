# CLAUDE.md â€“ GRIDKit Framework Blueprint

## ProjektÃ¼bersicht

**GRIDKit** ist ein deklaratives, metadata-driven PHP-Framework. EntitÃ¤ten werden als PHP-Klassen definiert â€“ das Framework generiert daraus automatisch: Formulare, Listen, Filter, Buttons, Modale, API-Endpoints und Datenbankstrukturen. Kein Inline-CSS, kein Einmal-Code. Alles Ã¼ber Komponenten, alles themeable, alles AJAX-driven.

**Inspiration:** Laravel Filament (deklarative Syntax), aber OHNE Laravel, OHNE Composer, OHNE Build-Tools. EigenstÃ¤ndiges PHP-Framework.

**Name:** GRIDKit
**Sprache:** Deutsch (Code-Kommentare, UI-Labels, Dokumentation)
**Stack:** PHP 8.2+, MySQL 8, Vanilla JS (Fetch API, kein jQuery), Beer CSS (Material Design 3)
**Architektur:** MVC + Component-Driven + Metadata-Driven + AJAX-First

---

## 1. AJAX-First Architektur

### 1.1 Grundprinzip

**Kein Full-Page-Reload.** Jede Benutzerinteraktion in Listen (Filtern, Suchen, Sortieren, Paginieren, LÃ¶schen, StatusÃ¤nderung) lÃ¤dt NUR den betroffenen Bereich per AJAX nach. Die Seite wird einmal geladen, danach kommuniziert der Browser ausschlieÃŸlich Ã¼ber die JSON-API.

### 1.2 Request-Flow

```
Browser (User-Aktion)
    â†“
JS-Event (z.B. Filter geÃ¤ndert)
    â†“
Fetch API â†’ GET /api/artikel?status=aktiv&sort=preis:desc&page=1&search=test
    â†“
Server: Entity â†’ QueryBuilder â†’ JSON-Response
    â†“
JS: DOM-Update (nur Tabelleninhalt, Pagination, Counter)
```

### 1.3 Was wird per AJAX geladen?

| Aktion | Was wird aktualisiert | Was bleibt |
|--------|----------------------|------------|
| Filter Ã¤ndern | Tabelle, Pagination, Counter | Sidebar, Header, Filter-UI |
| Suche tippen | Tabelle, Pagination, Counter | Alles andere (Debounce 300ms) |
| Sortierung klick | Tabelle | Alles andere |
| Seite wechseln | Tabelle, Pagination-Highlight | Alles andere |
| Zeile lÃ¶schen | Zeile entfernen + Counter | Alles andere |
| Modal speichern | Zeile aktualisieren/einfÃ¼gen | Alles andere |
| Bulk-Aktion | Betroffene Zeilen + Counter | Alles andere |

### 1.4 Response-Modi

```
GET /api/artikel?format=json     â†’ JSON-Daten (Standard, fÃ¼r JS-Rendering)
GET /api/artikel?format=html     â†’ HTML-Fragment (fÃ¼r einfaches innerHTML)
```

### 1.5 URL-State-Sync

Filter, Suche und Sortierung werden in der URL gespiegelt (History API):
- Bookmarks mit aktiven Filtern funktionieren
- Browser-ZurÃ¼ck korrekt
- Links mit Filtern teilbar

```
/admin/artikel?status=aktiv&sort=preis:desc&page=2&q=laptop
```

### 1.6 Loading-States

- Tabelle: CSS-Klasse `loading` â†’ Opacity 0.5
- Progress-Indicator in der Toolbar
- Buttons disabled wÃ¤hrend Request
- Smooth Transition nach Response

---

## 2. Verzeichnisstruktur

```
/gridkit/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ Entities/              # EntitÃ¤ts-Definitionen
â”‚   â”œâ”€â”€ Controllers/           # Auto-generierte oder manuelle Controller
â”‚   â”œâ”€â”€ Views/                 # Ãœberschreibbare View-Fragmente
â”‚   â””â”€â”€ Hooks/                 # Entity-spezifische Hooks
â”‚
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ Entity/
â”‚   â”‚   â”œâ”€â”€ BaseEntity.php     # Abstrakte Basisklasse
â”‚   â”‚   â”œâ”€â”€ FieldTypes.php     # Feld-Typ-Registry
â”‚   â”‚   â””â”€â”€ RelationTypes.php  # Beziehungs-Definitionen
â”‚   â”œâ”€â”€ UI/
â”‚   â”‚   â”œâ”€â”€ FormBuilder.php
â”‚   â”‚   â”œâ”€â”€ ListBuilder.php
â”‚   â”‚   â”œâ”€â”€ FilterBuilder.php
â”‚   â”‚   â”œâ”€â”€ ButtonBuilder.php
â”‚   â”‚   â”œâ”€â”€ ModalBuilder.php
â”‚   â”‚   â””â”€â”€ ComponentRegistry.php
â”‚   â”œâ”€â”€ Database/
â”‚   â”‚   â”œâ”€â”€ QueryBuilder.php
â”‚   â”‚   â”œâ”€â”€ Migration.php
â”‚   â”‚   â””â”€â”€ Connection.php
â”‚   â”œâ”€â”€ Router/
â”‚   â”‚   â”œâ”€â”€ Router.php
â”‚   â”‚   â””â”€â”€ ApiRouter.php
â”‚   â”œâ”€â”€ Theme/
â”‚   â”‚   â”œâ”€â”€ ThemeManager.php
â”‚   â”‚   â””â”€â”€ AssetPipeline.php
â”‚   â”œâ”€â”€ Auth/
â”‚   â”‚   â”œâ”€â”€ AuthManager.php
â”‚   â”‚   â””â”€â”€ Permission.php
â”‚   â””â”€â”€ Helpers/
â”‚       â”œâ”€â”€ Validator.php
â”‚       â””â”€â”€ Formatter.php
â”‚
â”œâ”€â”€ themes/
â”‚   â”œâ”€â”€ default/
â”‚   â”‚   â”œâ”€â”€ theme.json
â”‚   â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â”‚   â”œâ”€â”€ variables.css
â”‚   â”‚   â”‚   â”œâ”€â”€ components.css
â”‚   â”‚   â”‚   â””â”€â”€ layout.css
â”‚   â”‚   â”œâ”€â”€ js/
â”‚   â”‚   â”‚   â””â”€â”€ theme.js
â”‚   â”‚   â””â”€â”€ templates/
â”‚   â”‚       â”œâ”€â”€ layout.php
â”‚   â”‚       â”œâ”€â”€ form.php
â”‚   â”‚       â”œâ”€â”€ list.php
â”‚   â”‚       â”œâ”€â”€ modal.php
â”‚   â”‚       â”œâ”€â”€ filter.php
â”‚   â”‚       â”œâ”€â”€ buttons.php
â”‚   â”‚       â”œâ”€â”€ fields/
â”‚   â”‚       â””â”€â”€ partials/
â”‚   â””â”€â”€ dark/
â”‚
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ index.php
â”‚   â”œâ”€â”€ assets/
â”‚   â””â”€â”€ js/
â”‚       â”œâ”€â”€ core/
â”‚       â”‚   â”œâ”€â”€ app.js
â”‚       â”‚   â”œâ”€â”€ api.js
â”‚       â”‚   â”œâ”€â”€ events.js
â”‚       â”‚   â”œâ”€â”€ state.js
â”‚       â”‚   â””â”€â”€ loader.js
â”‚       â””â”€â”€ components/
â”‚           â”œâ”€â”€ list.js
â”‚           â”œâ”€â”€ filter.js
â”‚           â”œâ”€â”€ form.js
â”‚           â”œâ”€â”€ modal.js
â”‚           â”œâ”€â”€ upload.js
â”‚           â”œâ”€â”€ bulk.js
â”‚           â””â”€â”€ notification.js
â”‚
â”œâ”€â”€ demo/
â”‚   â”œâ”€â”€ index.php
â”‚   â”œâ”€â”€ entities/
â”‚   â”‚   â”œâ”€â”€ DemoArtikel.php
â”‚   â”‚   â”œâ”€â”€ DemoKunde.php
â”‚   â”‚   â”œâ”€â”€ DemoRechnung.php
â”‚   â”‚   â””â”€â”€ DemoNewsletter.php
â”‚   â”œâ”€â”€ showcase/
â”‚   â”‚   â”œâ”€â”€ fields.php
â”‚   â”‚   â”œâ”€â”€ lists.php
â”‚   â”‚   â”œâ”€â”€ forms.php
â”‚   â”‚   â”œâ”€â”€ modals.php
â”‚   â”‚   â”œâ”€â”€ buttons.php
â”‚   â”‚   â”œâ”€â”€ filters.php
â”‚   â”‚   â”œâ”€â”€ themes.php
â”‚   â”‚   â””â”€â”€ relations.php
â”‚   â””â”€â”€ docs/
â”‚       â”œâ”€â”€ getting-started.md
â”‚       â”œâ”€â”€ entity-reference.md
â”‚       â””â”€â”€ api-reference.md
â”‚
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ app.php
â”‚   â”œâ”€â”€ database.php
â”‚   â”œâ”€â”€ theme.php
â”‚   â””â”€â”€ permissions.php
â”‚
â””â”€â”€ migrations/
```

---

## 3. Demo-Seite (Showcase)

Interaktives Nachschlagewerk fÃ¼r alle GRIDKit-Komponenten. Zeigt jeden Parameter in Aktion, dient als Referenz fÃ¼r KI und Entwickler.

### 3.1 Demo-Dashboard (`/demo/`)

Navigation zu allen Showcase-Bereichen:
- Feldtypen-Galerie
- Listen-Playground
- Formular-Playground
- Modal-Showcase
- Button-Ãœbersicht
- Filter-Demonstration
- Theme-Switcher
- Praxis-Beispiele (Faktura, Newsletter, Kontakte)

### 3.2 Feldtypen-Galerie (`/demo/showcase/fields.php`)

Zeigt JEDEN Feldtyp in drei ZustÃ¤nden:
1. **Formular-Ansicht** â€“ wie das Feld im Formular aussieht
2. **Listen-Ansicht** â€“ wie das Feld in der Tabelle dargestellt wird
3. **Code-Ansicht** â€“ die Entity-Definition als PHP-Code

### 3.3 Listen-Playground (`/demo/showcase/lists.php`)

Interaktive Live-Demo mit echten Testdaten:
- Filter ein-/ausschalten (AJAX live)
- Spalten ein-/ausblenden
- Sortierung testen
- Pagination-Optionen
- Bulk-Aktionen ausprobieren
- Button-Positionen visualisieren

### 3.4 Praxis-Beispiele

| Beispiel | Entities | Zeigt |
|----------|----------|-------|
| **Faktura** | Rechnung, Position, Kunde | Inline-Relationen, Berechnungen |
| **Newsletter** | EmpfÃ¤nger, Kampagne, Template | Massenaktionen, Status-Workflow |
| **Kontakte** | Person, Firma, Notiz | Beziehungen, Suche, Tags |
| **Artikelverwaltung** | Artikel, Kategorie, Bild | Filter, Upload, Kategoriebaum |

---

## 4. Entity-Definition (Das HerzstÃ¼ck)

```php
<?php
namespace App\Entities;

use GRIDKit\Entity\BaseEntity;

class Artikel extends BaseEntity
{
    protected static string $table = 'artikel';
    protected static string $primaryKey = 'id';
    protected static string $labelField = 'titel';
    protected static string $icon = 'inventory_2';

    protected static array $fields = [
        'titel' => [
            'type'        => 'string',
            'label'       => 'Artikelbezeichnung',
            'required'    => true,
            'maxlength'   => 255,
            'searchable'  => true,
            'list'        => ['visible' => true, 'sortable' => true, 'position' => 1],
            'form'        => ['tab' => 'Allgemein', 'width' => 'full', 'position' => 1],
        ],
        'beschreibung' => [
            'type'        => 'textarea',
            'label'       => 'Beschreibung',
            'form'        => ['tab' => 'Allgemein', 'width' => 'full', 'position' => 2, 'rows' => 5],
        ],
        'preis' => [
            'type'        => 'decimal',
            'label'       => 'Preis',
            'precision'   => 10,
            'scale'       => 2,
            'format'      => 'currency',
            'currency'    => 'EUR',
            'required'    => true,
            'list'        => ['visible' => true, 'sortable' => true, 'position' => 3, 'align' => 'right'],
            'form'        => ['tab' => 'Allgemein', 'width' => 'half', 'position' => 3],
            'filter'      => ['type' => 'range'],
        ],
        'kategorie_id' => [
            'type'        => 'belongsTo',
            'label'       => 'Kategorie',
            'entity'      => 'Kategorie',
            'required'    => true,
            'list'        => ['visible' => true, 'sortable' => true, 'position' => 2],
            'form'        => ['tab' => 'Allgemein', 'width' => 'half', 'position' => 4, 'modal' => true],
            'filter'      => ['type' => 'select'],
        ],
        'status' => [
            'type'        => 'enum',
            'label'       => 'Status',
            'options'     => [
                'entwurf'  => ['label' => 'Entwurf',  'color' => 'secondary'],
                'aktiv'    => ['label' => 'Aktiv',     'color' => 'primary'],
                'archiv'   => ['label' => 'Archiviert','color' => 'tertiary'],
            ],
            'default'     => 'entwurf',
            'list'        => ['visible' => true, 'position' => 4, 'display' => 'chip'],
            'form'        => ['tab' => 'Allgemein', 'width' => 'half', 'position' => 5],
            'filter'      => ['type' => 'select'],
        ],
        'bild' => [
            'type'        => 'image',
            'label'       => 'Artikelbild',
            'upload_path' => 'artikel/bilder',
            'thumbnail'   => [120, 120],
            'form'        => ['tab' => 'Medien', 'width' => 'half', 'position' => 1],
            'list'        => ['visible' => true, 'position' => 0, 'display' => 'thumbnail'],
        ],
        'erstellt_am' => [
            'type'        => 'datetime',
            'label'       => 'Erstellt am',
            'auto'        => 'create',
            'list'        => ['visible' => true, 'sortable' => true, 'position' => 5],
            'filter'      => ['type' => 'daterange'],
        ],
    ];

    protected static array $listConfig = [
        'defaultSort'    => ['erstellt_am' => 'desc'],
        'perPage'        => 25,
        'perPageOptions' => [10, 25, 50, 100],
        'selectable'     => true,
        'searchFields'   => ['titel', 'beschreibung'],
        'ajax'           => true,
        'debounce'       => 300,
        'urlSync'        => true,
    ];

    protected static array $buttons = [
        'list_top_left' => [
            ['action' => 'create', 'label' => 'Neuer Artikel', 'icon' => 'add', 'style' => 'filled', 'modal' => true],
            ['action' => 'import', 'label' => 'Import',        'icon' => 'upload', 'style' => 'outlined'],
        ],
        'list_top_right' => [
            ['action' => 'export',  'label' => 'Export',    'icon' => 'download',   'style' => 'text'],
            ['action' => 'refresh', 'label' => 'Neu laden', 'icon' => 'refresh',    'style' => 'text'],
        ],
        'list_row' => [
            ['action' => 'edit',   'icon' => 'edit',   'tooltip' => 'Bearbeiten', 'modal' => true],
            ['action' => 'copy',   'icon' => 'content_copy', 'tooltip' => 'Duplizieren'],
            ['action' => 'delete', 'icon' => 'delete', 'tooltip' => 'LÃ¶schen', 'confirm' => true, 'style' => 'error'],
        ],
        'list_bulk' => [
            ['action' => 'bulk_delete',    'label' => 'LÃ¶schen',      'icon' => 'delete',  'confirm' => true],
            ['action' => 'bulk_status',    'label' => 'Status Ã¤ndern','icon' => 'edit',    'modal' => 'statusChange'],
            ['action' => 'bulk_export',    'label' => 'Exportieren',  'icon' => 'download'],
        ],
        'form_actions' => [
            ['action' => 'save',       'label' => 'Speichern',            'icon' => 'save',  'style' => 'filled'],
            ['action' => 'save_close', 'label' => 'Speichern & SchlieÃŸen','icon' => 'done',  'style' => 'tonal'],
            ['action' => 'cancel',     'label' => 'Abbrechen',            'icon' => 'close', 'style' => 'text'],
        ],
    ];

    protected static array $modals = [
        'create' => ['size' => 'large', 'title' => 'Neuen Artikel anlegen'],
        'edit'   => ['size' => 'large', 'title' => 'Artikel bearbeiten'],
        'delete' => ['size' => 'small', 'title' => 'Artikel lÃ¶schen', 'type' => 'confirm',
                     'message' => 'Soll dieser Artikel wirklich gelÃ¶scht werden?'],
        'statusChange' => ['size' => 'small', 'title' => 'Status Ã¤ndern', 'fields' => ['status']],
    ];

    protected static array $formTabs = [
        'Allgemein' => ['icon' => 'info'],
        'Medien'    => ['icon' => 'image'],
    ];

    protected static array $relations = [
        'positionen' => [
            'type'   => 'hasMany',
            'entity' => 'ArtikelPosition',
            'fk'     => 'artikel_id',
            'inline'  => true,
        ],
    ];

    public function beforeSave(array &$data): void { }
    public function afterSave(array $data, int $id): void { }
    public function beforeDelete(int $id): bool { return true; }
    public function formatForList(array &$row): void { }
}
```

---

## 5. VerfÃ¼gbare Feld-Typen

| Type | DB-Typ | Form-Element | Beschreibung |
|------|--------|-------------|--------------|
| `string` | VARCHAR | text input | Einzeiliger Text |
| `textarea` | TEXT | textarea | Mehrzeiliger Text |
| `richtext` | TEXT | WYSIWYG-Editor | HTML-Inhalt |
| `integer` | INT | number input | Ganzzahl |
| `decimal` | DECIMAL | number input | Dezimalzahl |
| `boolean` | TINYINT(1) | switch/toggle | Ja/Nein |
| `enum` | VARCHAR | select/chips | Auswahl aus Optionen |
| `date` | DATE | date picker | Datum |
| `datetime` | DATETIME | datetime picker | Datum + Uhrzeit |
| `time` | TIME | time picker | Uhrzeit |
| `email` | VARCHAR | email input | E-Mail |
| `url` | VARCHAR | url input | URL |
| `phone` | VARCHAR | tel input | Telefonnummer |
| `password` | VARCHAR | password input | Passwort (gehasht) |
| `color` | VARCHAR(7) | color picker | Farbwahl |
| `image` | VARCHAR | file upload + preview | Einzelbild |
| `file` | VARCHAR | file upload | Datei-Upload |
| `gallery` | JSON | multi-upload | Bildergalerie |
| `json` | JSON | code editor | JSON-Daten |
| `belongsTo` | INT (FK) | select/modal | n:1 Beziehung |
| `belongsToMany` | Pivot-Table | multi-select/modal | n:m Beziehung |
| `slug` | VARCHAR | auto-generated | URL-Slug |
| `computed` | â€“ | read-only | Berechnetes Feld |

---

## 6. Filter-System

### 6.1 Filter-Typen

```php
'filter' => ['type' => 'select']       // Dropdown
'filter' => ['type' => 'multiselect']  // Mehrfachauswahl (Chips)
'filter' => ['type' => 'range']        // Von-Bis (Zahlen, Preise)
'filter' => ['type' => 'daterange']    // Datums-Bereich
'filter' => ['type' => 'boolean']      // Ja/Nein Toggle
'filter' => ['type' => 'search']       // Freitext in Feld
'filter' => ['type' => 'tags']         // Tag-basiert
```

### 6.2 Listen-Layout mit Filtern und Buttons

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ” Suche...              [Status â–¼] [Kategorie â–¼] [â‚¬ Von-Bis] â”‚  â† Filter-Bar
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Aktive Filter: [Status: Aktiv âœ•] [Preis: 10-50â‚¬ âœ•]  Reset    â”‚  â† Chips
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [+ Neuer Artikel] [Import]            [Export] [â†» Neu laden]  â”‚  â† Buttons
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â˜ â”‚ ğŸ“· â”‚ Titel          â”‚ Kategorie â”‚ Preis   â”‚ Status â”‚ â‹®   â”‚
â”‚ â˜ â”‚ ğŸ–¼ â”‚ Laptop X1      â”‚ Elektronikâ”‚  1.299â‚¬ â”‚ â—Aktiv â”‚ âœğŸ—‘ â”‚
â”‚ â˜ â”‚ ğŸ–¼ â”‚ Maus Wireless  â”‚ ZubehÃ¶r   â”‚    29â‚¬  â”‚ â—Aktiv â”‚ âœğŸ—‘ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 47 von 142 EintrÃ¤gen                   [â—€ 1 2 3 4 5 6 â–¶]     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.3 AJAX-Filter-Verhalten

```
Suchfeld:       Debounce 300ms, dann Fetch
Select-Filter:  Sofort bei Ã„nderung
Range-Filter:   Bei Enter oder Blur
Daterange:      Bei Kalender-BestÃ¤tigung

Jede Ã„nderung: URL updaten â†’ Loading â†’ Fetch â†’ DOM-Update â†’ Loading aus
```

---

## 7. Theme-System

### 7.1 theme.json

```json
{
    "name": "GRIDKit Default",
    "version": "1.0.0",
    "extends": null,
    "cssFramework": "beercss",
    "colorScheme": {
        "primary": "#6750A4",
        "secondary": "#625B71",
        "tertiary": "#7D5260",
        "error": "#B3261E",
        "surface": "#FFFBFE"
    },
    "layout": {
        "sidebar": true,
        "sidebarWidth": "280px",
        "topbar": true,
        "rounded": "large"
    },
    "components": {
        "buttons": {
            "filled": "btn primary",
            "outlined": "btn outlined",
            "tonal": "btn tonal",
            "text": "btn text",
            "error": "btn error"
        }
    }
}
```

### 7.2 Regeln

- **KEIN** `style="..."` â€“ NIEMALS
- Alle Styles Ã¼ber CSS-Klassen aus dem Theme
- Farben Ã¼ber CSS Custom Properties
- Themes komplett austauschbar ohne Code-Ã„nderung

---

## 8. API-Konventionen

```
GET    /api/{entity}                 â†’ Liste (Filter, Sort, Pagination, Search)
GET    /api/{entity}/{id}            â†’ Einzelner Datensatz
POST   /api/{entity}                 â†’ Erstellen
PUT    /api/{entity}/{id}            â†’ Aktualisieren
DELETE /api/{entity}/{id}            â†’ LÃ¶schen
POST   /api/{entity}/bulk-delete     â†’ MassenlÃ¶schen
POST   /api/{entity}/bulk-update     â†’ Massenaktualisierung
GET    /api/{entity}/export          â†’ Export
POST   /api/{entity}/import          â†’ Import
GET    /api/{entity}/options         â†’ Select-Optionen (belongsTo)
```

### Query-Parameter

```
?sort=preis:desc&page=2&perPage=25&q=laptop
?status=aktiv&preis_min=10&preis_max=100
?kategorie_id=5,8,12&with=kategorie
```

### Response

```json
{
    "success": true,
    "data": [],
    "meta": {
        "total": 142, "filtered": 47, "page": 1,
        "perPage": 25, "pages": 2, "sort": "preis:desc",
        "filters": {"status": "aktiv"}
    }
}
```

---

## 9. Coding-Standards

- **PHP:** PSR-12, Strict Types, Type Hints
- **Namespace:** `GRIDKit\` (Core), `App\` (Anwendung)
- **Deutsch** fÃ¼r Labels/UI, **Englisch** fÃ¼r Code
- **Kein** Inline-CSS, kein Inline-JS, keine onclick-Handler
- **Keine** externen PHP-Dependencies (kein Composer)
- **Security:** Prepared Statements, CSRF, XSS-Escaping

---

## 10. Entwicklungsreihenfolge

1. **Phase 1 â€“ Kern:** BaseEntity, FieldTypes, Connection, QueryBuilder
2. **Phase 2 â€“ Routing:** Router, ApiRouter, Auto-Controller, JSON-Response
3. **Phase 3 â€“ UI-Builder:** FormBuilder, ListBuilder, ButtonBuilder
4. **Phase 4 â€“ AJAX:** JS-Core (api.js, state.js, loader.js), List + Filter
5. **Phase 5 â€“ Modal & Filter:** ModalBuilder, FilterBuilder, Modal-JS
6. **Phase 6 â€“ Theme:** ThemeManager, Default-Theme (Beer CSS M3)
7. **Phase 7 â€“ Auth:** AuthManager, Permission-System
8. **Phase 8 â€“ Extras:** Import/Export, Migration, Validator, Upload
9. **Phase 9 â€“ Demo:** Showcase mit allen Komponenten + Praxis-Beispiele

---

## 11. Wichtige Prinzipien

1. **Eine Entity-Klasse = komplette CRUD-Applikation.**
2. **Builder lesen NUR aus der Entity.**
3. **Themes bestimmen NUR das Aussehen.**
4. **AJAX-First.** Kein Full-Page-Reload bei Listen-Interaktionen.
5. **URL = State.** Filter, Sortierung, Seite immer in der URL.
6. **Neue Anwendung = neue Entity-Datei.**
7. **KI-freundlich:** Entity-Syntax so klar, dass Claude neue Entities in Sekunden erstellt.
8. **Kein Inline.** Alles Ã¼ber Klassen und data-Attribute.
9. **Progressive Enhancement.** Basis funktioniert ohne JS.
10. **Themes austauschbar.** Theme-Wechsel Ã¤ndert NICHTS an der Logik.
